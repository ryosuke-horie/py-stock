# CLAUDE.md

このファイルは、このリポジトリで作業する際にClaude Code (claude.ai/code) にガイダンスを提供します。

**重要**: このプロジェクトでは日本語でのコミュニケーションを基本とし、回答やコメントは日本語で生成してください。

## プロジェクト概要

PythonとClaude Code、MCP（Model Context Protocol）を統合したデイトレード戦略開発のための株式取引分析システムです。リアルタイムテクニカル分析、売買シグナル生成、デイトレードのリスク管理に重点を置いています。

## 想定アーキテクチャ

### データ層
- **データソース**: 株価データ取得にyfinance API（プロトタイプでは15-20分遅延）
- **ストレージ**: PostgreSQL/SQLiteを使用した履歴データ管理
- **リアルタイム処理**: 高頻度価格データ（1分足、5分足）

### 分析層
- **テクニカル指標**: EMA（9, 21）、RSI（14）、ストキャスティクス、MACD、ボリンジャーバンド
- **パターン認識**: サポート・レジスタンスレベル、ブレイクアウト検知
- **リスク分析**: VaR、シャープレシオ、相関分析

### MCP統合
システムは複数のMCPサーバを実装予定：
```
MCP株価データサーバ（リアルタイム価格配信）
├── MCPテクニカル分析サーバ（指標計算）
├── MCPシグナル生成サーバ（売買判定）
└── MCPリスク管理サーバ（リスク管理）
```

### 想定技術スタック
- **コア**: Python（pandas、numpy、scikit-learn）
- **ML ライブラリ**: 予測モデル用のtensorflow/pytorch
- **可視化**: ダッシュボード用のmatplotlib、plotly、streamlit
- **MCP開発**: TypeScript/Pythonサーバ実装

## 開発コマンド

新規プロジェクトのため、一般的なコマンドは以下を含む予定：

```bash
# Python環境セットアップ
python -m venv venv
source venv/bin/activate  # macOS/Linux
pip install -r requirements.txt

# テスト（実装時）
python -m pytest
python -m pytest tests/test_specific.py

# リンティング（設定時）
flake8 .
black .
mypy .

# 分析実行（実装時）
python main.py
streamlit run dashboard.py
```

## 主要実装領域

### データ収集モジュール
- yfinanceを使用したリアルタイム株価取得
- 履歴データの保存と取得
- 市場データの検証とクリーニング

### テクニカル分析エンジン
- モジュラー指標計算システム
- 設定可能な時間軸とパラメータ
- 戦略検証のためのバックテストフレームワーク

### シグナル生成システム
- 複数指標の組み合わせシグナル
- エントリー・エグジットタイミングの最適化
- リスクリワード比の計算

### MCPサーバ開発
- データアクセス用RESTful API
- リアルタイム更新用WebSocket接続
- 認証とレート制限

## トレード戦略の焦点

初期実装はデイトレードを対象とし、以下を含む：
- 短期テクニカル分析（日中パターン）
- 動的サポート・レジスタンスレベル
- モメンタムベースのエントリーシグナル
- 時間ベースの決済ルールとストップロス管理

## データに関する考慮事項

- プロトタイプではyfinanceの15-20分遅延データを使用
- 日本株市場データに焦点
- 将来のリアルタイムデータ統合を計画
- API障害に対する適切なデータ検証とエラーハンドリングの実装